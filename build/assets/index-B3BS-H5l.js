import{q as P,r as p,m as I,u as M,s as N,t as T,x as J,y as L,a as t,b as e,i as r,j as q,F as v,o as s,e as n,z as b,f as C,A as y,d as E,v as F,n as z,B as R}from"./index-hrb2gPjC.js";import{_ as G,P as H}from"./profileNavigation-DkZDUQmX.js";import{I as B,_ as K}from"./setImage-BFshDXUL.js";import{u as O}from"./staff-pwh36xwF.js";import{i as Q}from"./index-BfO-Za4V.js";import{I as D,a as U}from"./IconTrash-8xZHaLrw.js";import"./spinner-DRzgyy_w.js";const W=P("jobs",()=>{const m=p(null);return{result:m,jobsList(){I.get("/job-places").then(_=>{_.status===200?m.value=_.data:m.value=!1}).catch(_=>{console.error(_),m.value=!1})}}}),X={class:"mt-8"},Y={class:"container mx-auto px-4 lg:px-0"},Z={key:0,style:{"box-shadow":"0px 4px 20px 0px #0000001A"},class:"mt-5 rounded-lg w-full bg-white"},ee={class:"flex items-center justify-between text-mainColor w-full bg-[#E7F0FF] px-4 py-2"},te=e("h1",{class:"text-mainColor font-bold"}," Детали специализации ",-1),se={class:"flex items-center gap-5"},le={key:0,class:"p-5 flex flex-col gap-3"},oe={class:""},ae={key:1,class:"p-5 flex flex-col gap-3"},ie=["onUpdate:modelValue"],ne=["onClick"],de=e("p",null," Добавить детали специализации ",-1),ce={key:1},re={key:1,class:"bg-[#1EDA00] cursor-pointer text-white mt-4 text-center py-2 rounded-lg"},ue=e("span",{class:"spinner"},null,-1),pe=[ue],_e={key:2,style:{"box-shadow":"0px 4px 20px 0px #0000001A"},class:"mt-5 rounded-lg w-full bg-white"},fe={class:"flex items-center justify-between text-mainColor w-full bg-[#E7F0FF] px-4 py-2"},ve=e("h1",{class:"text-mainColor font-bold"}," Опыт работы ",-1),me={class:"flex items-center gap-5"},he={class:"p-5 flex flex-col gap-3"},xe={key:0,class:""},be={class:"mb-2"},ye=e("p",{class:"text-sm text-[#9A9BA4]"}," Место работы ",-1),ge={class:"p-3 border-b border-[#235CEE40]"},we={class:"flex justify-between gap-2"},ke={class:"w-full"},Ce=e("p",{class:"text-sm text-[#9A9BA4]"}," Старт работы ",-1),Ee={class:"p-3 border-b border-[#235CEE40]"},Fe={class:"w-full"},Ae=e("p",{class:"text-sm text-[#9A9BA4]"}," Конец работы ",-1),je={class:"p-3 border-b border-[#235CEE40]"},ze={key:1,class:""},Be={class:"mb-2"},De={class:"mb-2"},Ue=e("p",{class:"text-sm text-[#9A9BA4]"}," Место работы ",-1),Ve=["onUpdate:modelValue"],Se=e("option",{value:null}," Выберите место работы ",-1),$e=["value"],Pe={class:"flex justify-between gap-2"},Ie={class:"w-full"},Me=e("p",{class:"text-sm text-[#9A9BA4]"}," Старт работы ",-1),Ne=["onUpdate:modelValue"],Te={class:"w-full"},Je=e("p",{class:"text-sm text-[#9A9BA4]"}," Конец работы ",-1),Le=["onUpdate:modelValue"],qe=["onClick"],Re=e("p",null," Добавить место работы ",-1),Ge={key:3},He={key:1,class:"bg-[#1EDA00] cursor-pointer text-white mt-4 text-center py-2 rounded-lg"},Ke=e("span",{class:"spinner"},null,-1),Oe=[Ke],st={__name:"index",setup(m){const _=p("profile"),g=M(),{result:c}=N(g),A=W(),w=O(),h=p(!1),x=p(!1),f=p(!1),u=p({specialization_details:[]}),a=p(null);p([{title:"Главная",link:"/"},{title:"Профиль",link:"/profile"}]);const k=(j,d)=>{Q(j,{type:d,autoClose:1e3})},V=async()=>{f.value=!0,await w.updateSpecStaff(u.value),w.resultUpdateSpec!==!1?(k("Данные успешно обновлены","success"),await g.getProfile()):k("Произошла ошибка","error"),f.value=!1,h.value=!1},S=async()=>{f.value=!0,await w.updateJobPlaces(a.value),w.resultUpdatedJB!==!1?(k("Данные успешно обновлены","success"),await g.getProfile()):k("Произошла ошибка","error"),f.value=!1,x.value=!1};return T(async()=>{await J(),await g.getProfile(),await A.jobsList(),u.value.specialization_details=c.value.data.staff.specialization_details,a.value=c.value.data.staff.job_places}),L(()=>c,()=>{c.value&&(u.value.specialization_details=c.value.data.staff.specialization_details)}),(j,d)=>(s(),t(v,null,[e("div",X,[e("div",Y,[r(G,{name:_.value},{default:q(()=>[r(H),n(c)?(s(),t("div",Z,[e("div",ee,[te,e("div",se,[r(n(B),{class:"cursor-pointer",size:"24",onClick:d[0]||(d[0]=i=>h.value=!h.value)})])]),h.value?(s(),t("div",ae,[(s(!0),t(v,null,b(u.value.specialization_details,(i,l)=>(s(),t("div",{key:l,class:"flex gap-2"},[E(e("input",{"onUpdate:modelValue":o=>u.value.specialization_details[l]=o,placeholder:"Введите детали специализации",class:"p-3 border w-full rounded-lg"},null,8,ie),[[F,u.value.specialization_details[l]]]),e("div",{onClick:o=>u.value.specialization_details.splice(l,1),class:"bg-[#FFDEDB] flex rounded-md items-center justify-center px-2"},[r(n(U),{class:"text-red-500 cursor-pointer",size:"24"})],8,ne)]))),128)),e("div",{onClick:d[1]||(d[1]=i=>u.value.specialization_details.push("")),class:"flex justify-center cursor-pointer gap-2 text-sm border border-mainColor rounded py-1 w-full text-mainColor items-center mt-3"},[r(n(D)),de])])):(s(),t("div",le,[e("div",oe,[(s(!0),t(v,null,b(n(c).data.staff.specialization_details,(i,l)=>(s(),t("p",{key:l,class:"p-3 border-b border-[#235CEE40]"},y(i),1))),128))])]))])):C("",!0),h.value?(s(),t("div",ce,[f.value?(s(),t("p",re,pe)):(s(),t("p",{key:0,onClick:V,class:"bg-[#1EDA00] cursor-pointer text-white mt-4 text-center py-2 rounded-lg"}," Сохранить "))])):C("",!0),n(c)?(s(),t("div",_e,[e("div",fe,[ve,e("div",me,[r(n(B),{class:"cursor-pointer",size:"24",onClick:d[2]||(d[2]=i=>x.value=!x.value)})])]),e("div",he,[x.value?(s(),t("div",ze,[(s(!0),t(v,null,b(a.value,(i,l)=>(s(),t("div",{key:l,class:z(["p-3 rounded-lg block",{"bg-[#E7F0FF]":l%2===0}])},[e("div",Be,[e("div",De,[Ue,E(e("select",{"onUpdate:modelValue":o=>a.value[l].id=o,type:"text",class:"p-3 border w-full rounded-lg"},[Se,(s(!0),t(v,null,b(n(A).result,(o,$)=>(s(),t("option",{key:$,value:o.id},y(o.full_name),9,$e))),128))],8,Ve),[[R,a.value[l].id]])]),e("div",Pe,[e("div",Ie,[Me,E(e("input",{"onUpdate:modelValue":o=>a.value[l].start_date=o,type:"date",placeholder:"Введите детали специализации",class:"p-3 border w-full rounded-lg"},null,8,Ne),[[F,a.value[l].start_date]])]),e("div",Te,[Je,E(e("input",{"onUpdate:modelValue":o=>a.value[l].end_date=o,type:"date",placeholder:"Введите детали специализации",class:"p-3 border w-full rounded-lg"},null,8,Le),[[F,a.value[l].end_date]])])])]),e("div",{onClick:o=>a.value.splice(l,1),class:"bg-[#FFDEDB] cursor-pointer flex rounded-md items-center justify-center py-2"},[r(n(U),{class:"text-red-500",size:"24"})],8,qe)],2))),128)),e("div",{onClick:d[3]||(d[3]=i=>a.value.push({id:null,start_date:"",end_date:""})),class:"flex cursor-pointer justify-center gap-2 text-sm border border-mainColor rounded py-1 w-full text-mainColor items-center mt-5"},[r(n(D)),Re])])):(s(),t("div",xe,[(s(!0),t(v,null,b(n(c).data.staff.job_places,(i,l)=>(s(),t("div",{key:l,class:z(["p-3 rounded-lg",{"bg-[#E7F0FF]":l%2===0}])},[e("div",be,[ye,e("p",ge,y(i.job_place),1)]),e("div",we,[e("div",ke,[Ce,e("p",Ee,y(i.start_date),1)]),e("div",Fe,[Ae,e("p",je,y(i.end_date),1)])])],2))),128))]))])])):C("",!0),x.value?(s(),t("div",Ge,[f.value?(s(),t("p",He,Oe)):(s(),t("p",{key:0,onClick:S,class:"bg-[#1EDA00] cursor-pointer text-white mt-4 text-center py-2 rounded-lg"}," Сохранить "))])):C("",!0)]),_:1},8,["name"])])]),r(K)],64))}};export{st as default};
