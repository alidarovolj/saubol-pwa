import{c as w,r as c,u as C,s as E,a as m,b as e,w as M,d as h,v as V,n as y,e as l,f as d,g as $,h as g,i as I,j as B,k as F,o as n,l as j,m as N,p as S}from"./index-hrb2gPjC.js";import{i as T}from"./index-BfO-Za4V.js";import{u as U,r as x}from"./index-0WMocx8Q.js";var z=w("eye-closed","IconEyeClosed",[["path",{d:"M21 9c-2.4 2.667 -5.4 4 -9 4c-3.6 0 -6.6 -1.333 -9 -4",key:"svg-0"}],["path",{d:"M3 15l2.5 -3.8",key:"svg-1"}],["path",{d:"M21 14.976l-2.492 -3.776",key:"svg-2"}],["path",{d:"M9 17l.5 -4",key:"svg-3"}],["path",{d:"M15 17l-.5 -4",key:"svg-4"}]]),D=w("eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);const R="/assets/main-color-logo-42_CwZay.svg",q={class:"relative h-screen w-full"},P={class:"flex justify-between h-full items-center"},Z={class:"w-full bg-[#F6F6F7] relative h-full flex items-center justify-center"},A=e("img",{class:"mx-auto mb-5",src:R,alt:""},null,-1),G={class:"mb-5"},H=e("p",{class:"text-sm mb-1"}," Номер телефона или Email: ",-1),J={key:0,class:"text-red-500 text-xs"},K={class:"mb-5"},L=e("p",{class:"text-sm mb-1"}," Пароль: ",-1),O={class:"relative"},Q=["type"],W={key:2,class:"text-red-500 text-xs"},X={class:"flex justify-end mb-5"},Y=e("button",{type:"submit",class:"bg-mainColor py-3 text-white rounded-md w-full"}," Войти ",-1),ae={__name:"index",setup(ee){const r=c("password"),v=c(null),_=C();E(_);const i=c(!1),f=()=>{r.value=r.value==="password"?"text":"password"},u=(s,a)=>{T(s,{type:a,autoClose:1e3})},t=c({login:"",password:""}),o=U({login:{required:x},password:{required:x}},t),b=async()=>{if(i.value=!0,o.value.$validate(),o.value.$error){i.value=!1,u("Пожалуйста заполните все поля","error");return}N.post("/auth/staff-login",t.value).then(async s=>{console.log(s),v.value=s,s.status===200&&(localStorage.setItem("token","Bearer "+s.data.access_token),localStorage.setItem("token_exp",s.data.expires_in),await _.getProfile(),u("Вы успешно авторизовались","success"),S.push("/profile")),i.value=!1}).catch(s=>{i.value=!1,u("Неверный логин или пароль","error"),v.value=s.response})};return(s,a)=>{const k=F("router-link");return n(),m("div",q,[e("div",P,[e("div",Z,[e("form",{onSubmit:M(b,["prevent"]),class:"w-full lg:w-3/5 mx-auto px-4 lg:px-0 relative z-20"},[A,e("div",G,[H,h(e("input",{class:y(["w-full border border-[#E5E5E5] bg-white rounded-lg px-3 py-2",{"border-red-500":l(o).login.$error}]),type:"text","onUpdate:modelValue":a[0]||(a[0]=p=>t.value.login=p),placeholder:"Введите email"},null,2),[[V,t.value.login]]),l(o).login.$error?(n(),m("p",J," Пожалуйста заполните данное поле ")):d("",!0)]),e("div",K,[L,e("div",O,[h(e("input",{class:y(["w-full border border-[#E5E5E5] bg-white rounded-lg px-3 py-2",{"border-red-500":l(o).password.$error}]),type:r.value,"onUpdate:modelValue":a[1]||(a[1]=p=>t.value.password=p),placeholder:"Введите пароль"},null,10,Q),[[$,t.value.password]]),r.value==="text"?(n(),g(l(z),{key:0,onClick:f,class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer"})):d("",!0),r.value==="password"?(n(),g(l(D),{key:1,onClick:f,class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer"})):d("",!0),l(o).password.$error?(n(),m("p",W," Пожалуйста заполните данное поле ")):d("",!0)])]),e("div",X,[I(k,{class:"text-mainColor text-sm text-end",to:"/"},{default:B(()=>[j(" Забыли пароль? ")]),_:1})]),Y],32)])])])}}};export{ae as default};
