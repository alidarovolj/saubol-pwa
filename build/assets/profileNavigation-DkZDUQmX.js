import{S as F}from"./spinner-DRzgyy_w.js";import{c as j,q as A,r,m as k,s as C,u as P,t as M,y as N,o as s,a as o,b as e,e as a,w as $,d as B,v as D,A as v,N as I,i as u,f as z,O as T,_ as q,k as U,j as f,n as h}from"./index-hrb2gPjC.js";var O=j("exclamation-mark","IconExclamationMark",[["path",{d:"M12 19v.01",key:"svg-0"}],["path",{d:"M12 15v-10",key:"svg-1"}]]);const R="/assets/male_doctor-Bbnjne80.png",G=A("verification",()=>{const i=r(null),l=r(null);return{result:i,resultValidation:l,sendMessage(t){k.get(`/auth/send-message?phone_number=${t.phone_number}`).then(n=>{n.status===200?i.value=n.data:i.value=!1}).catch(n=>{console.error(n),i.value=!1})},validatePhone(t){k.post("/auth/validate-phone",t).then(n=>{n.status===200?l.value=n.data:l.value=!1}).catch(n=>{console.error(n),l.value=!1})}}}),H={id:"verificationModal",class:"modal"},J={class:"modal-box"},K=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"}," ✕ ")],-1),L={key:0,class:"font-bold text-xl mb-5"},Q={key:1,class:"font-bold text-xl mb-5"},W=e("button",{type:"submit",class:"btn btn-primary w-full mt-5"}," Отправить СМС ",-1),X=[W],Y={class:"flex flex-col gap-3"},Z={class:"flex flex-col gap-1"},ee=e("label",{for:"email",class:"text-[#9A9BA4]"}," Код верификации ",-1),te={key:0,class:"text-sm text-gray-400 mt-2"},se={key:2,type:"submit",class:"btn btn-primary w-full mt-5"},oe={key:3,class:"btn btn-primary w-full mt-5"},ae=e("span",{class:"spinner"},null,-1),le=[ae],ne=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1),ie={__name:"verifyNumber",props:{numPhone:{type:String,required:!0}},setup(i){const l=G(),{result:t,resultValidation:n}=C(l),p=P(),c=r(!1),d=r(30),x=i,_=r({phone_number:""}),m=r({code:""}),b=async()=>{c.value=!0,await l.sendMessage(_.value),t!==!1&&(d.value=30,S()),c.value=!1},E=async()=>{c.value=!0,await l.validatePhone(m.value),await p.getProfile(),c.value=!1,verificationModal.close()};let g;const S=()=>{d.value=30,g=setInterval(()=>{d.value--,d.value===0&&clearInterval(g)},1e3)};return M(()=>{_.value.phone_number=x.numPhone}),N(()=>x.numPhone,w=>{_.value.phone_number=w}),(w,y)=>(s(),o("dialog",H,[e("div",J,[K,a(t)===null||a(t)===!1?(s(),o("h3",L," Отправить письмо ")):(s(),o("h3",Q," Верификация номера ")),a(t)===null||a(t)===!1?(s(),o("form",{key:2,onSubmit:$(b,["prevent"]),action:""},X,32)):(s(),o("form",{key:3,onSubmit:$(E,["prevent"]),action:""},[e("div",Y,[e("div",Z,[ee,B(e("input",{"onUpdate:modelValue":y[0]||(y[0]=V=>m.value.code=V),placeholder:"Введите код",type:"text",id:"email",class:"w-full py-3 px-3 border rounded-xl"},null,512),[[D,m.value.code]])])]),d.value>0?(s(),o("p",te," Отправить код повторно можно будет через "+v(d.value)+" секунд ",1)):(s(),o("p",{key:1,class:"text-sm text-mainColor mt-2 cursor-pointer",onClick:b}," Отправить код повторно ")),c.value===!1?(s(),o("button",se," Верифицировать ")):(s(),o("div",oe,le))],32))]),ne]))}},re={class:"block lg:flex justify-between gap-6"},ce={class:"w-full"},de={key:0},ue={key:0,style:{"box-shadow":"0px 4px 20px 0px #0000001A"},class:"text-sm flex items-center gap-3 bg-white p-3 rounded-lg mb-5 w-full"},pe={class:"bg-red-500 rounded-full p-1 text-white w-14 h-14 flex items-center justify-center"},_e=e("div",null,[e("p",{class:"mb-2"}," Необходимо верифицировать номер "),e("button",{onclick:"verificationModal.showModal()",class:"bg-mainColor text-white rounded-lg px-10 py-2"}," Отправить код ")],-1),me={class:"block lg:flex justify-between w-full gap-5"},fe={style:{"box-shadow":"0px 4px 20px 0px #0000001A"},class:"flex mb-4 items-center bg-white w-full gap-3 h-full p-5 rounded-lg"},he={key:0,class:"relative h-full"},ve=["src"],xe={key:1,class:"relative h-full"},be=e("img",{class:"min-w-28 w-28 min-h-28 h-28 rounded-full object-cover mx-auto",src:R,alt:""},null,-1),ge=[be],we={class:"text-sm font-bold mb-3"},ye={class:"text-xs font-semibold text-mainColor px-5 py-1 rounded bg-[#E7F0FF] w-max"},ke={key:1,class:"bg-white px-5 py-6 rounded-lg"},Ae=I({__name:"profile",setup(i){const l=P(),{result:t}=C(l);r(!1);const n=r(!0);return r(!1),M(async()=>{await l.getProfile(),t.value===!1&&router.push("/"),n.value=!1}),(p,c)=>(s(),o("div",re,[e("div",ce,[a(t)?(s(),o("div",de,[a(t).data.phone_number&&!a(t).data.is_phone_verified?(s(),o("div",ue,[e("div",pe,[u(a(O),{size:"40"})]),_e])):z("",!0),e("form",me,[e("div",fe,[a(t).data.img?(s(),o("div",he,[e("img",{src:a(t).data.img,class:"min-w-28 w-28 min-h-28 h-28 rounded-full object-cover mx-auto",alt:""},null,8,ve)])):(s(),o("div",xe,ge)),e("div",null,[e("h1",we,v(a(t).data.name),1),e("p",ye,v(a(t).data.staff.specialization.name),1)])])]),e("div",null,[T(p.$slots,"default")]),u(ie,{numPhone:a(t).data.phone_number},null,8,["numPhone"])])):(s(),o("div",ke,[u(F)]))])]))}}),$e={},Ce={class:"w-full mb-4"},Pe={style:{"box-shadow":"0px 4px 20px 0px #0000001A"},class:"bg-white p-2 rounded-lg flex overflow-x-auto gap-1 text-sm"},Me=e("p",null,"Мои данные",-1),Ee=e("p",null,"Мой профиль",-1),Se=e("p",null,"Документы",-1);function Ve(i,l){const t=U("router-link");return s(),o("div",Ce,[e("div",Pe,[u(t,{class:h(["flex items-center hover:bg-[#ECEDFF] hover:text-mainColor gap-3 px-3 py-2 rounded-lg transition-all whitespace-nowrap",{"bg-mainColor !text-white":i.$route.fullPath==="/profile/my-data"}]),to:"/profile/my-data"},{default:f(()=>[Me]),_:1},8,["class"]),u(t,{class:h(["flex items-center hover:bg-[#ECEDFF] hover:text-mainColor gap-3 px-3 py-2 rounded-lg transition-all whitespace-nowrap",{"bg-mainColor !text-white":i.$route.fullPath==="/profile"}]),to:"/profile"},{default:f(()=>[Ee]),_:1},8,["class"]),u(t,{class:h(["flex items-center hover:bg-[#ECEDFF] hover:text-mainColor gap-3 px-3 py-2 rounded-lg transition-all whitespace-nowrap",{"bg-mainColor !text-white":i.$route.fullPath==="/profile/docs"}]),to:"/profile/docs"},{default:f(()=>[Se]),_:1},8,["class"])])])}const Ne=q($e,[["render",Ve]]);export{Ne as P,Ae as _};
